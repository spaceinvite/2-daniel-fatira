import { useState, useEffect, useRef } from 'react';

import styles from './StartBlock.module.scss';
import music from '../../assets/audio/music.mp3';

export const StartBlock = () => {
	const audioRef = useRef(null);

	const [isPlaying, setIsPlaying] = useState(false);

	const togglePlay = () => {
		if (audioRef.current.paused) {
			audioRef.current.play();
			setIsPlaying(true);
		} else {
			audioRef.current.pause();
			setIsPlaying(false);
		}
	};

	useEffect(() => {
		if (audioRef.current) {
			audioRef.current.volume = 0.3;
		}
	});

	return (
		<div className={styles.block}>
			<div className={styles.blockTop}>
				<p
					className={styles.blockTop__text}
					data-aos='zoom-in'
					data-aos-duration='1000'
					data-aos-once='true'
				>
					SAVE THE DATE
				</p>
				<div
					className={styles.blockTop__music}
					data-aos='zoom-in'
					data-aos-duration='1000'
					data-aos-once='true'
				>
					{isPlaying ? (
						<div className={styles.blockTop__musicHigh} onClick={togglePlay}>
							<svg
								width='20'
								height='21'
								viewBox='0 0 20 21'
								fill='none'
								xmlns='http://www.w3.org/2000/svg'
							>
								<path
									d='M11.5133 17.1142C11.3035 17.1131 11.0976 17.0574 10.9158 16.9525L7.8583 15.1858C7.44632 14.9489 6.97939 14.8242 6.50414 14.8242H3.69914C3.17442 14.8231 2.67153 14.6141 2.30058 14.243C1.92963 13.8719 1.72085 13.3689 1.71997 12.8442V8.15584C1.72107 7.63127 1.92994 7.1285 2.30087 6.75757C2.6718 6.38665 3.17457 6.17777 3.69914 6.17667H6.50414C6.97954 6.17613 7.44648 6.05085 7.8583 5.81334L10.9166 4.04917C11.0985 3.9443 11.3046 3.88905 11.5145 3.88898C11.7244 3.8889 11.9307 3.944 12.1126 4.04875C12.2945 4.15349 12.4456 4.30421 12.5509 4.48579C12.6562 4.66738 12.7119 4.87344 12.7125 5.08334V15.9167C12.714 16.1272 12.6594 16.3343 12.5543 16.5167C12.4491 16.6991 12.2971 16.8501 12.1141 16.9542C11.9312 17.059 11.7241 17.1142 11.5133 17.1142ZM3.69914 7.01001C3.39538 7.01045 3.10419 7.13131 2.8894 7.3461C2.67461 7.56089 2.55374 7.85208 2.5533 8.15584V12.8442C2.55418 13.1479 2.67516 13.4389 2.88983 13.6537C3.1045 13.8686 3.39544 13.9897 3.69914 13.9908H6.50414C7.1258 13.9907 7.73654 14.1543 8.27497 14.465L11.3333 16.23C11.3889 16.2615 11.4518 16.278 11.5157 16.2777C11.5796 16.2774 11.6424 16.2604 11.6977 16.2284C11.7531 16.1964 11.7991 16.1505 11.8312 16.0952C11.8633 16.04 11.8804 15.9773 11.8808 15.9133V5.08334C11.8808 5.01929 11.8639 4.95638 11.8318 4.90093C11.7997 4.84548 11.7537 4.79944 11.6982 4.76744C11.6427 4.73544 11.5798 4.71859 11.5157 4.71861C11.4517 4.71862 11.3888 4.73548 11.3333 4.76751L8.27497 6.53501C7.73662 6.84603 7.12588 7.00985 6.50414 7.01001H3.69914ZM15.3391 5.71834C16.0025 6.32521 16.5326 7.06326 16.8957 7.88571C17.2589 8.70816 17.4473 9.59709 17.449 10.4962C17.4506 11.3952 17.2655 12.2848 16.9053 13.1086C16.5451 13.9324 16.0178 14.6724 15.3566 15.2817C14.9616 15.6458 15.5525 16.2342 15.9458 15.8708C16.6837 15.1838 17.2719 14.3518 17.6735 13.427C18.0751 12.5022 18.2816 11.5044 18.2799 10.4962C18.2783 9.48794 18.0686 8.49087 17.664 7.56738C17.2593 6.64389 16.6684 5.81384 15.9283 5.12917C15.5333 4.76751 14.9416 5.35584 15.3391 5.71834Z'
									fill='#F5F4F2'
								/>
								<path
									d='M14.0916 8.02581C14.4361 8.33903 14.7116 8.72062 14.9004 9.14624C15.0891 9.57186 15.1871 10.0322 15.1881 10.4978C15.189 10.9634 15.0929 11.4241 14.9058 11.8505C14.7188 12.2768 14.4449 12.6595 14.1016 12.9741C13.7066 13.3391 14.2966 13.9266 14.6908 13.5633C15.1106 13.1708 15.4451 12.6961 15.6734 12.1687C15.9018 11.6413 16.0192 11.0725 16.0183 10.4978C16.0173 9.92309 15.8981 9.35472 15.668 8.82808C15.4379 8.30144 15.1018 7.8278 14.6808 7.43664C14.2858 7.07498 13.6949 7.66331 14.0916 8.02581Z'
									fill='#F5F4F2'
								/>
							</svg>
						</div>
					) : (
						<div className={styles.blockTop__musicMute} onClick={togglePlay}>
							<svg
								width='20'
								height='20'
								viewBox='0 0 20 20'
								fill='none'
								xmlns='http://www.w3.org/2000/svg'
							>
								<path
									d='M11.5142 16.6133C11.303 16.613 11.096 16.5554 10.915 16.4467L7.85833 14.6867C7.44665 14.4488 6.97961 14.3235 6.50416 14.3233H3.69999C3.17522 14.3229 2.67207 14.1142 2.301 13.7432C1.92993 13.3721 1.72127 12.869 1.72083 12.3442V7.65585C1.72171 7.13113 1.93048 6.62815 2.30143 6.25704C2.67238 5.88593 3.17528 5.67695 3.69999 5.67584H6.50416C6.97941 5.67581 7.44634 5.55111 7.85833 5.31418L10.9167 3.54918C11.0985 3.44457 11.3047 3.38954 11.5145 3.38959C11.7243 3.38964 11.9304 3.44477 12.1122 3.54947C12.294 3.65417 12.4451 3.80476 12.5505 3.9862C12.6558 4.16763 12.7117 4.37355 12.7125 4.58334V15.4167C12.7141 15.6272 12.6595 15.8343 12.5543 16.0167C12.4491 16.1991 12.2972 16.3501 12.1142 16.4542C11.9316 16.5589 11.7247 16.6138 11.5142 16.6133ZM3.69999 6.50918C3.39609 6.50962 3.10477 6.6306 2.88996 6.84557C2.67514 7.06054 2.55438 7.35194 2.55416 7.65585V12.3442C2.5546 12.6479 2.67546 12.9391 2.89025 13.1539C3.10504 13.3687 3.39623 13.4896 3.69999 13.49H6.50416C7.12597 13.4904 7.73672 13.6545 8.27499 13.9658L11.3333 15.73C11.389 15.762 11.452 15.7789 11.5162 15.7789C11.5804 15.7789 11.6435 15.762 11.6992 15.73C11.7549 15.6984 11.8012 15.6525 11.8331 15.5969C11.8651 15.5414 11.8816 15.4783 11.8808 15.4142V4.58334C11.8808 4.5193 11.8639 4.45639 11.8318 4.40094C11.7998 4.34549 11.7537 4.29945 11.6982 4.26745C11.6427 4.23544 11.5798 4.2186 11.5158 4.21861C11.4517 4.21862 11.3888 4.23549 11.3333 4.26751L8.27499 6.03501C7.73656 6.34574 7.12582 6.50928 6.50416 6.50918H3.69999ZM14.6717 12.0375C14.5916 12.1064 14.4883 12.1424 14.3827 12.138C14.2771 12.1336 14.1771 12.0893 14.1029 12.014C14.0288 11.9387 13.986 11.838 13.9833 11.7324C13.9806 11.6268 14.0182 11.524 14.0883 11.445C14.23 11.3042 14.3717 11.1542 14.5217 11.0117L15.53 10.0042C15.055 9.52001 14.5717 9.03668 14.0883 8.55418C14.0195 8.47496 13.983 8.37267 13.9863 8.26775C13.9896 8.16284 14.0324 8.06303 14.1061 7.98828C14.1798 7.91354 14.279 7.86936 14.3838 7.86458C14.4887 7.8598 14.5915 7.89478 14.6717 7.96251L16.1217 9.41168L17.5717 7.96251C17.6518 7.89478 17.7546 7.8598 17.8595 7.86458C17.9644 7.86936 18.0636 7.91354 18.1372 7.98828C18.2109 8.06303 18.2537 8.16284 18.257 8.26775C18.2603 8.37267 18.2239 8.47496 18.155 8.55418L16.7133 10.0042L18.155 11.445C18.2252 11.524 18.2627 11.6268 18.26 11.7324C18.2573 11.838 18.2145 11.9387 18.1404 12.014C18.0662 12.0893 17.9662 12.1336 17.8607 12.138C17.7551 12.1424 17.6518 12.1064 17.5717 12.0375L16.1192 10.5833L14.6717 12.0375Z'
									fill='#F5F4F2'
								/>
							</svg>
						</div>
					)}
					<audio src={music} ref={audioRef} autoPlay loop controls hidden />
				</div>
			</div>
			<div className={styles.blockBottom}>
				<p
					className={styles.blockBottom__name}
					data-aos='fade-right'
					data-aos-duration='2000'
					data-aos-once='true'
				>
					Даниял
				</p>
				<p
					className={styles.blockBottom__text}
					data-aos='zoom-in'
					data-aos-duration='1000'
					data-aos-once='true'
				>
					И
				</p>
				<p
					className={styles.blockBottom__name}
					data-aos='fade-left'
					data-aos-duration='2000'
					data-aos-once='true'
				>
					Фатира
				</p>
			</div>
		</div>
	);
};
